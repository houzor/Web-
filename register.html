<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ³¨å†Œ</title>
    <link rel="stylesheet" href="./css/bootstrap.min.css">
    <link rel="stylesheet" href="./css/Stisla_style.css">
    <script src="./js/jquery.min.js"></script>
    <script src="./js/jquery.pwstrength.min.js"></script>
    <script src="./js/sweetalert2.all.min.js"></script>
    
</head>
<body>
    <div id="app">
        <section class="section">
            <div class="container mt-5">
                <div class="row">
                    <div
                        class="col-12 col-sm-10 offset-sm-1 col-md-8 offset-md-2 col-lg-8 offset-lg-2 col-xl-8 offset-xl-2">

                        <div class="card card-primary">
                            <div class="card-header">
                                <h4>æ³¨å†Œ</h4>
                            </div>

                            <div class="card-body">
                                <form action="login.html" method="get" class="needs-validation" novalidate="">
                                    <div class="row">
                                        <div class="form-group col-lg-6 col-sm-12 col-xs-12">
                                            <label for="name">æ˜µç§°</label>
                                            <input id="name" type="text" class="form-control" name="name" required
                                                autofocus>
                                            <div class="invalid-feedback">
                                                    è¯·å¡«å†™æ˜µç§°
                                            </div>
                                        </div>

                                    </div>

                                    <div class="row">
                                        <div class="form-group col-lg-6 col-sm-12 col-xs-12">
                                            <label for="email">é‚®ç®±</label>
                                            <div class="input-group">
                                                <input type="text" id="email" class="form-control col-7" required>
                                                <select class="custom-select input-group-append col-5"
                                                    id="email_postfix" required style="border-top-right-radius: .25rem;
                          border-bottom-right-radius: .25rem;">
                                                    <option value="@gmail.com" selected="">@gmail.com</option>
                                                    <option value="@qq.com">@qq.com</option>
                                                    <option value="@outlook.com">@outlook.com</option>
                                                    <option value="@163.com">@163.com</option>
                                                    <option value="@126.com">@126.com</option>
                                                    <option value="@hotmail.com">@hotmail.com</option>
                                                    <option value="@foxmail.com">@foxmail.com</option>
                                                </select>
                                                <div class="invalid-feedback">
                                                    è¯·å¡«å†™é‚®ç®±
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group col-lg-6 col-sm-12 col-xs-12">
                                            <label for="phone" class="d-block">æ‰‹æœºå·</label>
                                            <input id="phone" type="text" class="form-control " data-indicator="pwindicator" name="phone"
                                                required>

                                            <div class="invalid-feedback">
                                                è¯·å¡«å†™æ‰‹æœºå·
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="form-group col-lg-6 col-sm-12 col-xs-12">
                                            <label for="passwd" class="d-block">å¯†ç </label>
                                            <input id="passwd" type="password" class="form-control pwstrength"
                                                data-indicator="pwindicator" name="passwd" required>
                                            <div id="pwindicator" class="pwindicator">
                                                <div class="bar"></div>
                                                <div class="label"></div>
                                            </div>
                                            <div class="invalid-feedback">
                                                è¯·å¡«å†™å¯†ç 
                                            </div>
                                        </div>
                                        <div class="form-group col-lg-6 col-sm-12 col-xs-12">
                                            <label for="repasswd" class="d-block">ç¡®è®¤å¯†ç </label>
                                            <input id="repasswd" type="password" class="form-control" name="repasswd"
                                                required>
                                            <div class="invalid-feedback">
                                                è¯·å†æ¬¡å¡«å†™å¯†ç 
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <button id="register-confirm" onclick="register()"
                                            class="btn btn-primary btn-lg btn-block">
                                            æ³¨å†Œ
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                        <div class="mt-5 text-muted text-center">
                            å·²ç»æœ‰è´¦å·äº†ï¼Ÿ<a href="login.html">é©¬ä¸Šç™»å½• ğŸ‘‰</a>
                        </div>

                    </div>
                </div>
            </div>
        </section>
    </div>
</body>

<script>

    function checkName() {
                //1.è·å–é‚®ç®±å€¼
                var name = $("#name").val();
                //2.å®šä¹‰æ­£åˆ™
                var reg_name = /^[\u4e00-\u9fa5-a-zA-Z0-9_-]{4,16}$/
                //3.åˆ¤æ–­ï¼Œç»™å‡ºæç¤ºä¿¡æ¯
                var flag = reg_name.test(name);
                if (flag) {
                    //ç”¨æˆ·ååˆæ³•
                } else {
                    swal({
                        type: 'error',
                        title: 'è¯·è¾“å…¥åˆæ³•çš„ç”¨æˆ·åï¼Œ4åˆ°16ä½ï¼ˆä¸­æ–‡ï¼Œå­—æ¯ï¼Œæ•°å­—ï¼Œä¸‹åˆ’çº¿ï¼Œå‡å·ï¼‰',
                        showCloseButton: true,
                    })
                }
                // 4.è¿”å›æ ¡éªŒæ˜¯å¦é€šè¿‡
                return flag;
            }
    function checkPhone() {
            //1.è·å–é‚®ç®±å€¼
            var phone = $("#phone").val();
            //2.å®šä¹‰æ­£åˆ™
            var reg_phone = /^((13[0-9])|(14[5|7])|(15([0-3]|[5-9]))|(18[0,5-9]))\d{8}$/
            //3.åˆ¤æ–­ï¼Œç»™å‡ºæç¤ºä¿¡æ¯
            var flag = reg_phone.test(phone);
            if (flag) {
                //æ‰‹æœºå·åˆæ³•
            } else {
                swal({
                    type: 'error',
                    title: 'è¯·å¡«å†™æ­£ç¡®çš„æ‰‹æœºæ ¼å¼',
                    showCloseButton: true,
                })
            }
            // 4.è¿”å›æ ¡éªŒæ˜¯å¦é€šè¿‡
            return flag;
        }
    function checkPassword() {
                    //1.è·å–é‚®ç®±å€¼
                    var password = $("#passwd").val();
                    var repassword = $("#repasswd").val();
                    if (password==repassword) {
                        //æ‰‹æœºå·åˆæ³•
                    } else {
                        swal({
                            type: 'error',
                            title: 'ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸ä¸€è‡´',
                            showCloseButton: true,
                        })
                    }
                    // 4.è¿”å›æ ¡éªŒæ˜¯å¦é€šè¿‡
                    return flag;
                }
    function register() {
                $(".needs-validation").submit(function () {
                    var form = $(this);
                    event.preventDefault();
                });
                if ($("#name").val() || $("#email").val() || $("#phone").val() || $("#passwd").val() || $("#repasswd").val()) {
                    var email = $("#email").val() + $("#email_postfix").val();
                    var password = $("#passwd").val();
                    var name=$('#name').val();
                    var phone=$('phone').val();
                    localStorage.setItem("myname", name);
                    localStorage.setItem("myphone",phone)
                    localStorage.setItem("myemail", email);
                    localStorage.setItem("mypassword", password);
                    swal({
                        type: 'success',
                        title: 'æ³¨å†ŒæˆåŠŸ',
                        showCloseButton: true,
                    })
                    setTimeout(function () {
                        window.location.replace("./login.html")
                    }, 3000);
                }

            }
    $("#name").blur(checkName);
    $("#phone").blur(checkPhone);
    $('#repasswd').blur(checkPassword);
    $(".pwstrength").pwstrength({
                    texts: ['è¶…çº§å¼±', 'å¼±', 'ä¸€èˆ¬', 'ä¸é”™', 'å¾ˆå¼ºğŸ‘Œ']
                });
    $(function () {
            $(".needs-validation").submit(function () {
                var form = $(this);
                if (form[0].checkValidity() === false) {
                    //æ£€æµ‹åˆ°ä¸ºç©ºï¼Œé˜»æ­¢è¡¨å•æäº¤å’Œäº‹ä»¶å†’æ³¡
                    event.preventDefault();
                    event.stopPropagation();
                }
                //æ·»åŠ ç©ºçš„ç±»ï¼Œç„¶åå°±ä¼šæ˜¾ç¤ºç©ºçš„ä¸œè¥¿
                form.addClass('was-validated');
            });

        });
</script>
</html>